import{r as u,o as g,c as l,a as i,b as n,w as s,v as d,d as y,F as k,e as S,f as N,t as m}from"./index-BsvYQriA.js";const w={class:"form-container"},x=["onClick"],D={__name:"ReminderForm",setup(U){const t=u({content:"",time:"",repeat:"none"}),r=u([]),v=()=>{const o=localStorage.getItem("reminders");r.value=o?JSON.parse(o):[]},p=async()=>{if(!("serviceWorker"in navigator)){alert("Service Workerに対応していません");return}const o=await navigator.serviceWorker.ready;if(!("showNotification"in o)){alert("このブラウザは通知の表示に対応していません（PWAとして追加してください）");return}const e=await Notification.requestPermission();alert("permission: "+e),e==="granted"?o.showNotification("テスト通知",{body:"通知が届くようになりました",icon:"icon.png"}):alert("拒否されました: "+e)},c=()=>{if(!t.value.content||!t.value.time)return alert("入力してください");const o={id:crypto.randomUUID(),content:t.value.content,time:t.value.time,repeat:t.value.repeat,notified:!1};r.value.push(o),localStorage.setItem("reminders",JSON.stringify(r.value)),t.value={content:"",time:"",repeat:"none"},alert("保存しました！")},f=o=>{r.value=r.value.filter(e=>e.id!==o),localStorage.setItem("reminders",JSON.stringify(r.value))};return g(()=>{v(),p()}),(o,e)=>(i(),l("div",w,[e[4]||(e[4]=n("h3",null,"新規リマインダー",-1)),s(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.content=a),type:"text",placeholder:"何をする？"},null,512),[[d,t.value.content]]),s(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.time=a),type:"datetime-local"},null,512),[[d,t.value.time]]),s(n("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.repeat=a)},[...e[3]||(e[3]=[n("option",{value:"none"},"繰り返しなし",-1),n("option",{value:"daily"},"毎日",-1)])],512),[[y,t.value.repeat]]),n("button",{onClick:c},"保存"),e[5]||(e[5]=n("hr",null,null,-1)),e[6]||(e[6]=n("h4",null,"登録済みリスト",-1)),n("ul",null,[(i(!0),l(k,null,S(r.value,a=>(i(),l("li",{key:a.id},[N(m(a.time)+" - "+m(a.content)+" ",1),n("button",{onClick:V=>f(a.id)},"削除",8,x)]))),128))])]))}};export{D as default};
