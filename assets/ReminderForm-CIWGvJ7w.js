import{r as u,o as y,c as a,a as i,b as t,w as s,v as d,d as k,F as m,e as S,f as N,t as v}from"./index-DsLBggEy.js";const w={class:"form-container"},b=["onClick"],C={__name:"ReminderForm",setup(x){const n=u({content:"",time:"",repeat:"none"}),r=u([]),p=()=>{const o=localStorage.getItem("reminders");r.value=o?JSON.parse(o):[]},c=async()=>{if(!("serviceWorker"in navigator)){alert("Service Workerに対応していません");return}const o=await navigator.serviceWorker.ready;if(!("showNotification"in o)){alert("このブラウザは通知の表示に対応していません（PWAとして追加してください）");return}const e=await Notification.requestPermission();alert("permission: "+e),e==="granted"?o.showNotification("テスト通知",{body:"通知が届くようになりました",icon:"icon.png"}):alert("拒否されました: "+e)},f=()=>{if(!n.value.content||!n.value.time)return alert("入力してください");const o={id:crypto.randomUUID(),content:n.value.content,time:n.value.time,repeat:n.value.repeat,notified:!1};r.value.push(o),localStorage.setItem("reminders",JSON.stringify(r.value)),n.value={content:"",time:"",repeat:"none"},alert("保存しました！")},g=o=>{r.value=r.value.filter(e=>e.id!==o),localStorage.setItem("reminders",JSON.stringify(r.value))};return y(()=>{p()}),(o,e)=>(i(),a(m,null,[t("div",{class:"container"},[e[3]||(e[3]=t("h2",null,"通知の設定",-1)),e[4]||(e[4]=t("p",null,"リマインダーを受け取るには通知を許可してください。",-1)),t("button",{onClick:c,class:"btn"}," 通知を許可する ")]),t("div",w,[e[6]||(e[6]=t("h3",null,"新規リマインダー",-1)),s(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.value.content=l),type:"text",placeholder:"何をする？"},null,512),[[d,n.value.content]]),s(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.time=l),type:"datetime-local"},null,512),[[d,n.value.time]]),s(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.repeat=l)},[...e[5]||(e[5]=[t("option",{value:"none"},"繰り返しなし",-1),t("option",{value:"daily"},"毎日",-1)])],512),[[k,n.value.repeat]]),t("button",{onClick:f},"保存"),e[7]||(e[7]=t("hr",null,null,-1)),e[8]||(e[8]=t("h4",null,"登録済みリスト",-1)),t("ul",null,[(i(!0),a(m,null,S(r.value,l=>(i(),a("li",{key:l.id},[N(v(l.time)+" - "+v(l.content)+" ",1),t("button",{onClick:U=>g(l.id)},"削除",8,b)]))),128))])])],64))}};export{C as default};
